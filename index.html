<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine Quiz üíû</title>
  <style>
    :root{
      --bg1:#fff1f4;
      --bg2:#ffe6ef;
      --card:#ffffffcc;
      --text:#25161b;
      --muted:#6b4b55;
      --accent:#e11d48;
      --accent2:#fb7185;
      --shadow: 0 14px 34px rgba(0,0,0,.12);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 900px at 20% 10%, var(--bg1), transparent 60%),
                  radial-gradient(1100px 900px at 80% 20%, var(--bg2), transparent 55%),
                  linear-gradient(180deg, #fff, #ffeef6);
      overflow-x:hidden;
    }
    .wrap{max-width:980px;margin:0 auto;padding:22px 16px 70px}
    header{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:10px 4px 12px;
      flex-wrap:wrap;
    }
    .badge{
      display:inline-flex;align-items:center;gap:10px;
      background:#fff;
      border:1px solid rgba(0,0,0,.06);
      border-radius:999px;
      padding:10px 14px;
      box-shadow:0 6px 18px rgba(0,0,0,.07);
      font-weight:800;
    }
    .badge span{color:var(--accent)}
    .chip{
      font-size:14px;color:var(--muted);
      background:rgba(255,255,255,.7);
      border:1px solid rgba(0,0,0,.06);
      padding:8px 12px;border-radius:999px;
    }
    .card{
      background:var(--card);
      border:1px solid rgba(0,0,0,.06);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:22px;
      backdrop-filter: blur(10px);
    }
    h1{margin:0 0 6px;font-size:40px;line-height:1.05;letter-spacing:-.02em}
    h2{margin:0 0 8px;font-size:22px}
    p{margin:0;color:var(--muted);line-height:1.6}
    .big{font-size:16px}
    .divider{height:1px;background:rgba(0,0,0,.07);margin:16px 0}
    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;align-items:center}
    button{
      appearance:none;border:none;cursor:pointer;
      padding:12px 14px;border-radius:14px;
      font-weight:800;
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease, opacity .2s ease;
      user-select:none;
    }
    button:active{transform:translateY(1px)}
    .primary{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:white;
      box-shadow: 0 10px 22px rgba(225,29,72,.25);
    }
    .secondary{
      background:rgba(255,255,255,.78);
      border:1px solid rgba(0,0,0,.08);
      color:var(--text);
    }
    .ghost{
      background:transparent;
      border:1px dashed rgba(225,29,72,.35);
      color:var(--text);
    }
    .topbar{
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
      margin-top:10px;
    }
    .pill{
      font-size:13px;color:var(--muted);
      background:rgba(255,255,255,.75);
      border:1px solid rgba(0,0,0,.06);
      padding:8px 12px;border-radius:999px;
      font-weight:750;
    }
    .reaction{
      margin-top:10px;
      color: var(--accent);
      font-weight: 800;
      min-height: 24px;
    }

    /* Creative start screen layout */
    .heroGrid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
      margin-top:10px;
      align-items:stretch;
    }
    @media (max-width:860px){ .heroGrid{grid-template-columns:1fr;} h1{font-size:34px} }

    .tiles{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:12px;
    }
    @media (max-width:860px){ .tiles{grid-template-columns:1fr;} }

    .tile{
      background:rgba(255,255,255,.72);
      border:1px solid rgba(0,0,0,.06);
      border-radius:18px;
      padding:12px 12px;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .2s ease;
      box-shadow:0 10px 22px rgba(0,0,0,.07);
      min-height:92px;
    }
    .tile:hover{transform: translateY(-1px)}
    .tile b{display:block;margin-bottom:6px}
    .tile small{color:var(--muted);line-height:1.45}

    /* Envelope */
    .envelope{
      border-radius:18px;
      border:1px dashed rgba(225,29,72,.35);
      background:
        radial-gradient(420px 220px at 30% 35%, rgba(251,113,133,.22), transparent 55%),
        radial-gradient(520px 260px at 70% 60%, rgba(225,29,72,.12), transparent 55%),
        rgba(255,255,255,.78);
      padding:14px;
      display:grid;
      gap:10px;
      position:relative;
      overflow:hidden;
    }
    .sealRow{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .seal{
      width:44px;height:44px;border-radius:999px;
      display:grid;place-items:center;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      color:white;font-size:20px;font-weight:900;
      box-shadow:0 14px 26px rgba(225,29,72,.25);
      transform: rotate(-8deg);
    }
    .letter{
      background: rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.06);
      border-radius:16px;
      padding:12px;
      display:none;
    }
    .letter.show{display:block; animation: pop .22s ease-out;}
    @keyframes pop{
      from{transform: translateY(6px); opacity:.0}
      to{transform: translateY(0); opacity:1}
    }

    /* Final heart badge */
    .resultWrap{
      display:grid;
      place-items:center;
      text-align:center;
      gap:14px;
      padding: 18px 6px 6px;
    }
    .heartBadge{
      width: 210px;
      height: 210px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      position:relative;
      background:
        radial-gradient(90px 90px at 30% 30%, rgba(251,113,133,.35), transparent 60%),
        radial-gradient(110px 110px at 70% 70%, rgba(225,29,72,.22), transparent 62%),
        rgba(255,255,255,.85);
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .heartIcon{
      font-size: 84px;
      line-height: 1;
      filter: drop-shadow(0 10px 18px rgba(225,29,72,.18));
      transform: translateY(-8px);
    }
    .scoreText{
      position:absolute;
      bottom: 36px;
      font-weight: 900;
      color: var(--text);
      letter-spacing: -.02em;
      font-size: 22px;
      background: rgba(255,255,255,.8);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 999px;
      padding: 8px 12px;
    }

    /* ‚ÄúYes‚Äù button bigger */
    .bigYes{
      padding: 14px 18px;
      font-size: 16px;
      border-radius: 16px;
      transform-origin: center;
    }

    /* floating hearts */
    .heart{
      position:fixed;
      font-size:18px;
      pointer-events:none;
      animation: floatUp 3.8s linear forwards;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
      opacity:.9;
      z-index: 9998;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) scale(.9); opacity: .95;}
      to{ transform: translateY(-110vh) scale(1.25); opacity: 0;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="badge">Made with <span>‚ô•</span> by <span id="fromName"></span></div>
      <div class="chip">Valentine‚Äôs ‚Ä¢ <span id="today"></span></div>
    </header>

    <main class="card" id="app"></main>
  </div>

<script>
/** =========================
 *  EDIT ONLY THIS BLOCK
 *  ========================= */
const QUIZ = {
  fromName: "Shikamaruuuu",
  herName: "Kakashiiiiii",
  pointsPerQuestion: 10,

  startSubtitle: "Before the quiz‚Ä¶ open your letter üíå",
  letterTitle: "A tiny note",
  letterBody:
    "You‚Äôre my favorite notification. Even from far away. Now tap through this little game and claim your prize üòåüíû",
  vibeOptions: [
    { label: "Soft ü•∫", line: "Soft mode unlocked. Extra pyaar." },
    { label: "Funny üòå", line: "Funny mode unlocked. Expect drama + memes." },
    { label: "Bold üòà", line: "Bold mode unlocked. I‚Äôm not even pretending to be calm." }
  ],

  finalScoreText: "100 out of 70",

  questions: [
    {
      id: 1,
      question: "What's the longest duration of our call ?",
      options: [
        "Relationship cannot be counted by numbers, it is timeless",
        "5 Hrs",
        "5.30 Hrs",
        "Ab itna dhyaan kon rakhta hai"
      ]
    },
    {
      id: 2,
      question: "What time of the day do we usually talk the longest?",
      options: [
        "Morning 6am-10am",
        "Noon 10 am-2 pm",
        "Afternoon 2pm-5pm",
        "Whenever i get free, I don't remember the time"
      ]
    },
    {
      id: 3,
      question: "Which is the most spoken word to shikamaru",
      options: [
        "Ae Jana",
        "Good Morning",
        "Khauf",
        "Shikamaru"
      ]
    },
    {
      id: 4,
      question: "What‚Äôs the one thing we always do on calls?",
      options: [
        "Gossips",
        "Serious discussions on life",
        "drunk texts",
        "Daily content in each other's life"
      ]
    },
    {
      id: 5,
      question: "Who has been maximum time late on dates?",
      options: [
        "Neha",
        "Kakashi",
        "Leo's Sister",
        "Doll"
      ]
    },
    {
      id: 6,
      question: "When is the next meeting date",
      options: [
        "FT Right after this quizz",
        "Whenever Neha wants to fly to blr",
        "sometime in Feb if MCC is not an asshole",
        "Whenever shikamaru hits a jackpot of leaves from the toxic manager"
      ]
    },
    {
      id: 7,
      question: "Which activity Neha enjoys the most?",
      options: [
        "Talking to Shikamaru",
        "Talking Leo for a walk",
        "Hanging out with cousins",
        "Reading Books",
        "Sleeping"
      ]
    }
  ]
};
/** ========================= */

const state = {
  screen: "start",  // start | quiz | end
  index: 0,
  score: 0,
  letterOpen: false,
  vibe: null,
  startUnlocked: false,

  // end-screen interaction state
  endStep: 0 // 0 initial, 1 after maybe, 2 after you can do better
};

const $ = (id) => document.getElementById(id);

function setToday(){
  const d = new Date();
  $("today").textContent = d.toLocaleDateString(undefined, { year:"numeric", month:"short", day:"numeric" });
}

function spawnHeart(x, y){
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.textContent = Math.random() > 0.5 ? "üíó" : "üíñ";
  heart.style.left = (x ?? (Math.random() * window.innerWidth)) + "px";
  heart.style.top  = (y ?? (window.innerHeight - 20)) + "px";
  heart.style.fontSize = (16 + Math.random()*16) + "px";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 3900);
}
function heartBurst(n=18){
  for(let i=0;i<n;i++){
    setTimeout(() => spawnHeart(Math.random()*window.innerWidth, window.innerHeight - 10), i*35);
  }
}
function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

function render(){
  const app = $("app");
  app.innerHTML = "";
  if(state.screen === "start") return renderStart(app);
  if(state.screen === "quiz") return renderQuiz(app);
  if(state.screen === "end") return renderEnd(app);
}

function renderStart(app){
  const h = document.createElement("h1");
  h.innerHTML = `Hi, <span style="color:var(--accent)">${escapeHtml(QUIZ.herName)}</span> üíû`;
  app.appendChild(h);

  const p = document.createElement("p");
  p.className = "big";
  p.textContent = QUIZ.startSubtitle;
  app.appendChild(p);

  const grid = document.createElement("div");
  grid.className = "heroGrid";

  // Left: envelope + tiles
  const left = document.createElement("div");

  const env = document.createElement("div");
  env.className = "envelope";
  env.innerHTML = `
    <div class="sealRow">
      <div style="display:grid;gap:2px">
        <b style="font-size:14px">For ${escapeHtml(QUIZ.herName)}</b>
        <small style="color:var(--muted)">Tap the seal to open</small>
      </div>
      <div class="seal" id="sealBtn">‚ô•</div>
    </div>
    <div class="letter ${state.letterOpen ? "show" : ""}" id="letterBox">
      <b>${escapeHtml(QUIZ.letterTitle)}</b>
      <div style="height:8px"></div>
      <small style="color:var(--muted);line-height:1.55">${escapeHtml(QUIZ.letterBody)}</small>
    </div>
  `;
  left.appendChild(env);

  const tiles = document.createElement("div");
  tiles.className = "tiles";

  const t1 = document.createElement("div");
  t1.className = "tile";
  t1.innerHTML = `<b>Pick a vibe üé≠</b><small>${state.vibe ? "Selected: " + escapeHtml(state.vibe.label) : "Soft / Funny / Bold"}</small>`;
  t1.onclick = () => {
    const nextIdx = state.vibe ? (QUIZ.vibeOptions.indexOf(state.vibe) + 1) % QUIZ.vibeOptions.length : 0;
    state.vibe = QUIZ.vibeOptions[nextIdx];
    heartBurst(10);
    render();
  };

  const t2 = document.createElement("div");
  t2.className = "tile";
  t2.innerHTML = `<b>Warm-up üîì</b><small>${state.startUnlocked ? "Unlocked! Start button is ready ‚ú®" : "Tap here to unlock the quiz"}</small>`;
  t2.onclick = () => {
    state.startUnlocked = true;
    heartBurst(16);
    render();
  };

  const t3 = document.createElement("div");
  t3.className = "tile";
  t3.innerHTML = `<b>Tap for hearts üíó</b><small>Because you deserve extra</small>`;
  t3.onclick = () => heartBurst(24);

  tiles.appendChild(t1);
  tiles.appendChild(t2);
  tiles.appendChild(t3);
  left.appendChild(tiles);

  // Right: summary card
  const right = document.createElement("div");
  right.className = "card";
  right.style.boxShadow = "none";
  right.style.border = "1px solid rgba(0,0,0,.06)";

  const rTitle = document.createElement("h2");
  rTitle.textContent = "What you‚Äôre about to play";
  right.appendChild(rTitle);

  const rP = document.createElement("p");
  rP.className = "big";
  rP.textContent = "A tiny Valentine quiz where every option is correct üòå (I just want your choices.)";
  right.appendChild(rP);

  const divider = document.createElement("div");
  divider.className = "divider";
  right.appendChild(divider);

  const meta = document.createElement("div");
  meta.className = "topbar";
  meta.innerHTML = `
    <div class="pill">Questions: ${QUIZ.questions.length}</div>
    <div class="pill">let's see if you pass the valentines test</div>
  `;
  right.appendChild(meta);

  const vibeLine = document.createElement("p");
  vibeLine.style.marginTop = "12px";
  vibeLine.textContent = state.vibe ? state.vibe.line : "Pick a vibe on the left (optional).";
  right.appendChild(vibeLine);

  const btns = document.createElement("div");
  btns.className = "btnrow";

  const startBtn = document.createElement("button");
  startBtn.className = state.startUnlocked ? "primary" : "secondary";
  startBtn.textContent = state.startUnlocked ? "Start Quiz ‚ú®" : "Unlock first üîì";
  startBtn.style.opacity = state.startUnlocked ? "1" : ".75";
  startBtn.onclick = () => {
    if(!state.startUnlocked){
      heartBurst(8);
      return;
    }
    state.screen = "quiz";
    state.index = 0;
    state.score = 0;
    heartBurst(18);
    render();
  };

  const openLetterBtn = document.createElement("button");
  openLetterBtn.className = "ghost";
  openLetterBtn.textContent = state.letterOpen ? "Close letter" : "Open letter üíå";
  openLetterBtn.onclick = () => {
    state.letterOpen = !state.letterOpen;
    heartBurst(10);
    render();
  };

  btns.appendChild(startBtn);
  btns.appendChild(openLetterBtn);
  right.appendChild(btns);

  grid.appendChild(left);
  grid.appendChild(right);
  app.appendChild(grid);

  setTimeout(() => {
    const seal = document.getElementById("sealBtn");
    if(seal){
      seal.onclick = () => {
        state.letterOpen = !state.letterOpen;
        heartBurst(14);
        render();
      };
    }
  }, 0);
}

function renderQuiz(app){
  const q = QUIZ.questions[state.index];

  const top = document.createElement("div");
  top.className = "topbar";
  top.innerHTML = `
    <div class="pill">Question ${state.index + 1} / ${QUIZ.questions.length}</div>
    <div class="pill">Score: ${state.score}</div>
  `;
  app.appendChild(top);

  const divider = document.createElement("div");
  divider.className = "divider";
  app.appendChild(divider);

  const h = document.createElement("h1");
  h.textContent = q.question;
  app.appendChild(h);

  const hint = document.createElement("p");
  hint.className = "big";
  hint.textContent = "Choose any option üòå";
  app.appendChild(hint);

  const opts = document.createElement("div");
  opts.className = "btnrow";
  q.options.forEach((label, idx) => {
    const b = document.createElement("button");
    b.className = "secondary";
    b.textContent = label;
    b.onclick = () => answer(idx);
    opts.appendChild(b);
  });
  app.appendChild(opts);

  const reaction = document.createElement("div");
  reaction.className = "reaction";
  reaction.id = "reaction";
  app.appendChild(reaction);

  const nav = document.createElement("div");
  nav.className = "btnrow";

  const backBtn = document.createElement("button");
  backBtn.className = "ghost";
  backBtn.textContent = "Back";
  backBtn.disabled = state.index === 0;
  backBtn.style.opacity = backBtn.disabled ? .5 : 1;
  backBtn.onclick = () => {
    if(state.index === 0) return;
    state.index -= 1;
    state.score = Math.max(0, state.score - QUIZ.pointsPerQuestion);
    render();
  };

  nav.appendChild(backBtn);
  app.appendChild(nav);
}

function answer(choiceIndex){
  state.score += QUIZ.pointsPerQuestion;

  const reaction = document.getElementById("reaction");
  if(reaction) reaction.textContent = "Correct üòåüíû";
  spawnHeart();

  state.index += 1;

  setTimeout(() => {
    if(state.index >= QUIZ.questions.length){
      finish();
    } else {
      render();
    }
  }, 600);
}

function finish(){
  heartBurst(40);
  state.screen = "end";
  state.endStep = 0;
  render();
}

function renderEnd(app){
  const h = document.createElement("h1");
  h.textContent = "Result üíò";
  app.appendChild(h);

  const divider = document.createElement("div");
  divider.className = "divider";
  app.appendChild(divider);

  const wrap = document.createElement("div");
  wrap.className = "resultWrap";

  const badge = document.createElement("div");
  badge.className = "heartBadge";
  badge.innerHTML = `
    <div class="heartIcon">üíñ</div>
    <div class="scoreText">${escapeHtml(QUIZ.finalScoreText)}</div>
  `;

  const questionLine = document.createElement("p");
  questionLine.className = "big";
  questionLine.style.color = "var(--text)";
  questionLine.style.fontWeight = "900";
  questionLine.textContent = "Will you be Shikamaru's Valentine?";

  const hintLine = document.createElement("p");
  hintLine.className = "big";
  hintLine.id = "endHint";
  hintLine.style.maxWidth = "640px";
  hintLine.textContent = ""; // filled by endStep state

  const row = document.createElement("div");
  row.className = "btnrow";
  row.style.justifyContent = "center";

  const leftBtn = document.createElement("button");
  leftBtn.id = "leftBtn";
  leftBtn.className = "primary bigYes";
  leftBtn.textContent = "Yes";

  const rightBtn = document.createElement("button");
  rightBtn.id = "rightBtn";
  rightBtn.className = "secondary";
  rightBtn.textContent = "May be";

  // Apply state-driven text + behavior
  applyEndState(leftBtn, rightBtn, hintLine);

  row.appendChild(leftBtn);
  row.appendChild(rightBtn);

  wrap.appendChild(badge);
  wrap.appendChild(questionLine);
  wrap.appendChild(hintLine);
  wrap.appendChild(row);

  app.appendChild(wrap);
}

function applyEndState(leftBtn, rightBtn, hintLine){
  // Reset defaults
  leftBtn.className = "primary bigYes";
  leftBtn.textContent = state.endStep >= 1 ? "Hard Yes" : "Yes";

  if(state.endStep === 0){
    hintLine.textContent = "";

    leftBtn.onclick = () => {
      heartBurst(45);
      hintLine.textContent = "Yayyy üíû Date accepted. Shikamaru is smiling already üòå";
      // disable both
      leftBtn.disabled = true; rightBtn.disabled = true;
      leftBtn.style.opacity = .85; rightBtn.style.opacity = .6;
    };

    rightBtn.textContent = "May be";
    rightBtn.onclick = () => {
      state.endStep = 1;
      heartBurst(14);
      render();
    };
    return;
  }

  if(state.endStep === 1){
    hintLine.textContent = "Think again‚Ä¶ I think you want to date Shikamaru üòå. Press ‚ÄúHard Yes‚Äù to the left to accept, else click ‚ÄúYou can do beter‚Äù.";
    rightBtn.textContent = "You can do beter";
    rightBtn.onclick = () => {
      state.endStep = 2;
      heartBurst(16);
      render();
    };

    leftBtn.onclick = () => {
      heartBurst(45);
      hintLine.textContent = "Correct choice üòåüíû Date accepted. Shikamaru wins!";
      leftBtn.disabled = true; rightBtn.disabled = true;
      leftBtn.style.opacity = .85; rightBtn.style.opacity = .6;
    };
    return;
  }

  // endStep === 2
  hintLine.textContent = "You have chosen the right button üòåüíó and you have the best man waiting for you. Press ‚ÄúHard Yes‚Äù to accept.";
  rightBtn.textContent = "You have chosen the right button";
  rightBtn.disabled = true;
  rightBtn.style.opacity = .7;

  leftBtn.onclick = () => {
    heartBurst(55);
    hintLine.textContent = "DONE üíû Shikamaru has officially secured his Valentine. See you on our date üòå";
    leftBtn.disabled = true;
    leftBtn.style.opacity = .85;
  };
}

// Init
document.getElementById("fromName").textContent = QUIZ.fromName;
setToday();
render();

// subtle hearts on background taps
document.addEventListener("click", (e) => {
  if (e.target.tagName.toLowerCase() === "button") return;
  if (Math.random() < 0.2) spawnHeart(e.clientX, e.clientY);
});
</script>
</body>
</html>

